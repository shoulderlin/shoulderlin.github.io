<!DOCTYPE html>
<html lang="zh-Hant" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>å¯†ç¢¼ç”¢ç”Ÿå™¨</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Tailwind æ·±è‰²æ¨¡å¼åˆå§‹åŒ–è¨­å®š
    tailwind.config = {
      darkMode: 'class',
    };
  </script>
</head>
<body class="bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-100 min-h-screen flex items-center justify-center p-6">

  <div class="w-full max-w-2xl bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-8 space-y-6 transition">
    <div class="flex justify-between items-center">
      <h1 class="text-2xl font-bold text-gray-800 dark:text-white">ğŸ” å¯†ç¢¼ç”¢ç”Ÿå™¨</h1>
      <button onclick="toggleDarkMode()"
              class="bg-gray-200 dark:bg-gray-700 text-sm px-3 py-1 rounded hover:bg-gray-300 dark:hover:bg-gray-600 transition">
        ğŸŒ— åˆ‡æ›ä¸»é¡Œ
      </button>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <div>
        <label class="block mb-1">å¯†ç¢¼é•·åº¦ï¼š</label>
        <input type="number" id="length" value="12" min="4" max="100"
               class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" />
      </div>
      <div>
        <label class="block mb-1">ç”¢ç”Ÿçµ„æ•¸ï¼š</label>
        <input type="number" id="count" value="5" min="1" max="100"
               class="w-full border rounded-lg p-2 dark:bg-gray-700 dark:border-gray-600" />
      </div>
    </div>

    <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
      <label class="flex items-center space-x-2">
        <input type="checkbox" id="includeLower" checked class="accent-blue-600" />
        <span>å°å¯«å­—æ¯</span>
      </label>
      <label class="flex items-center space-x-2">
        <input type="checkbox" id="includeUpper" checked class="accent-blue-600" />
        <span>å¤§å¯«å­—æ¯</span>
      </label>
      <label class="flex items-center space-x-2">
        <input type="checkbox" id="includeNumbers" checked class="accent-blue-600" />
        <span>æ•¸å­—</span>
      </label>
      <label class="flex items-center space-x-2">
        <input type="checkbox" id="includeSymbols" checked class="accent-blue-600" />
        <span>ç‰¹æ®Šç¬¦è™Ÿ</span>
      </label>
    </div>

    <button onclick="generatePasswords()"
            class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition">
      ğŸš€ ç”¢ç”Ÿå¯†ç¢¼
    </button>

    <div id="error" class="text-red-500 text-sm"></div>

    <div id="result" class="space-y-4"></div>
  </div>

  <script>
    function toggleDarkMode() {
      document.documentElement.classList.toggle('dark');
    }

    function generatePasswords() {
      const length = parseInt(document.getElementById('length').value);
      const count = parseInt(document.getElementById('count').value);
      const includeLower = document.getElementById('includeLower').checked;
      const includeUpper = document.getElementById('includeUpper').checked;
      const includeNumbers = document.getElementById('includeNumbers').checked;
      const includeSymbols = document.getElementById('includeSymbols').checked;

      const lower = 'abcdefghijklmnopqrstuvwxyz';
      const upper = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      const numbers = '0123456789';
      const symbols = '!@#$%^&()_+-=[]{}|;,.<>';

      const pools = [];
      if (includeLower) pools.push(lower);
      if (includeUpper) pools.push(upper);
      if (includeNumbers) pools.push(numbers);
      if (includeSymbols) pools.push(symbols);

      const resultBox = document.getElementById('result');
      const errorBox = document.getElementById('error');
      resultBox.innerHTML = '';
      errorBox.textContent = '';

      if (pools.length === 0) {
        errorBox.textContent = 'è«‹è‡³å°‘å‹¾é¸ä¸€ç¨®å…ƒç´ ã€‚';
        return;
      }
      if (length < pools.length) {
        errorBox.textContent = `å¯†ç¢¼é•·åº¦è‡³å°‘è¦æœ‰ ${pools.length}ï¼Œä»¥ç¢ºä¿æ¯ç¨®é¡å‹è‡³å°‘ä¸€å€‹å­—å…ƒã€‚`;
        return;
      }

      for (let i = 0; i < count; i++) {
        let password = '';
        pools.forEach(pool => {
          password += pool.charAt(Math.floor(Math.random() * pool.length));
        });

        const allChars = pools.join('');
        for (let j = password.length; j < length; j++) {
          password += allChars.charAt(Math.floor(Math.random() * allChars.length));
        }

        password = password.split('').sort(() => Math.random() - 0.5).join('');

        const card = document.createElement('div');
        card.className = 'bg-gray-50 dark:bg-gray-700 p-4 rounded-lg border shadow flex flex-col md:flex-row md:items-center md:justify-between space-y-2 md:space-y-0';
        
        const text = document.createElement('div');
        text.className = 'font-mono text-lg break-words text-gray-800 dark:text-white';
        text.textContent = password;

        const strength = evaluateStrength(password);
        const strengthLabel = document.createElement('span');
        strengthLabel.className = `text-sm font-bold ${strengthColor(strength)}`;
        strengthLabel.textContent = `å¼·åº¦ï¼š${strength}`;

        const copyBtn = document.createElement('button');
        copyBtn.className = 'bg-blue-500 hover:bg-blue-600 text-white rounded px-3 py-1 text-sm';
        copyBtn.textContent = 'è¤‡è£½';
        copyBtn.onclick = () => {
          navigator.clipboard.writeText(password);
          copyBtn.textContent = 'âœ… å·²è¤‡è£½';
          setTimeout(() => copyBtn.textContent = 'è¤‡è£½', 1500);
        };
        card.onclick = () => {
          navigator.clipboard.writeText(password);
          copyBtn.textContent = 'âœ… å·²è¤‡è£½';
          setTimeout(() => copyBtn.textContent = 'è¤‡è£½', 1500);
        };
        const actionBox = document.createElement('div');
        actionBox.className = 'flex items-center space-x-4';
        actionBox.appendChild(strengthLabel);
        actionBox.appendChild(copyBtn);

        card.appendChild(text);
        card.appendChild(actionBox);
        resultBox.appendChild(card);
      }
    }

    function evaluateStrength(pw) {
      let score = 0;
      if (/[a-z]/.test(pw)) score++;
      if (/[A-Z]/.test(pw)) score++;
      if (/[0-9]/.test(pw)) score++;
      if (/[^a-zA-Z0-9]/.test(pw)) score++;
      if (pw.length >= 12) score++;

      switch (score) {
        case 5: return 'éå¸¸å¼·';
        case 4: return 'å¼·';
        case 3: return 'ä¸­ç­‰';
        case 2: return 'å¼±';
        default: return 'éå¸¸å¼±';
      }
    }

    function strengthColor(level) {
      switch (level) {
        case 'éå¸¸å¼·': return 'text-green-600';
        case 'å¼·': return 'text-lime-600';
        case 'ä¸­ç­‰': return 'text-yellow-600';
        case 'å¼±': return 'text-orange-600';
        default: return 'text-red-600';
      }
    }
  </script>
</body>
</html>
